{% extends "base.html" %}

{% block title %}{{ 'Sửa' if user else 'Thêm' }} Người dùng{% endblock %}

{% block content %}
    <h2>{{ 'Sửa thông tin' if user else 'Thêm Người dùng mới' }}</h2>
    <hr>
    <form method="post">
        <div class="form-group">
            <label for="username">Tên tài khoản</label>
            <input type="text" name="username" class="form-control" value="{{ user.username if user }}" required>
        </div>
        <div class="form-group">
            <label for="password">Mật khẩu</label>
            <input type="password" name="password" class="form-control" placeholder="{{ 'Để trống nếu không muốn thay đổi' if user }}">
        </div>
        <div class="form-group">
            <label for="role">Loại quyền</label>
            <select name="role" class="form-control" required>
                <option value="binh_thuong" {% if user and user.role == 'binh_thuong' %}selected{% endif %}>Bình thường</option>
                <option value="phe_duyet" {% if user and user.role == 'phe_duyet' %}selected{% endif %}>Phê duyệt</option>
                <option value="admin" {% if user and user.role == 'admin' %}selected{% endif %}>Admin</option>
            </select>
        </div>
        <div class="form-group">
            <label for="organization_id">Tổ chức</label>
            <select name="organization_id" class="form-control">
                <option value="">-- Không thuộc tổ chức nào --</option>
                {% for org in organizations %}
                <option value="{{ org.id }}" {% if user and user.organization_id == org.id %}selected{% endif %}>{{ org.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="notes">Ghi chú</label>
            <textarea name="notes" class="form-control">{{ user.notes if user }}</textarea>
        </div>
        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
        <a href="{{ url_for('quan_ly_nguoi_dung') }}" class="btn btn-secondary">Hủy</a>
    </form>
{% endblock %}